<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header class="nav">
        <nav>
            <a href="{{ url_for('index') }}">Home</a>
            <a href="{{ url_for('new_ticket') }}">New Ticket</a>
            <a href="{{ url_for('view_tickets') }}">View Tickets</a>
            <a href="{{ url_for('new_job') }}">View Jobs</a>>
        </nav>
    </header>

    <h1>Hello, Ticket System!</h1>
    <p>Welcome Jobs.</p>
    <button id="openJobModal">New Job</button>
        <div id="jobModal" class="modal">
  <div class="modal-content">

            <h2>Create New Job</h2>

            <form method="POST">

            <label>Name:</label>
            <input type="text" name="name" required>

            <label>Operator:</label>
            <input type="text" name="operator" required>

            <label>Description:</label>
            <textarea name="description" required></textarea>

            <label>Impact:</label>
            <select name="impact">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>

            <label>Impact on customer:</label>
            <select name="impact_customer">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>

            <label>What is the impact:</label>
            <textarea name="impact_desc"></textarea>

            <label>Time Start:</label>
            <input type="datetime-local" name="time_start" required>

            <label>Time End:</label>
            <input type="datetime-local" name="time_end">

            <button type="submit">Create Job</button>
            </form>

            <button id="closeJobModal">Close</button>

        </div>
</div>

  {% if jobs %}
    <ul style="list-style:none; padding:0;">

    {% for j in jobs %}
        <li style="
            background:#f4f4f4;
            padding:15px;
            margin-bottom:12px;
            border-radius:8px;
            border:1px solid #ddd;
        ">
            <strong style="font-size:18px;">{{ j.name }}</strong>
            <div><strong>Operator:</strong> {{ j.operator }}</div>
            <div><strong>Description:</strong> {{ j.description }}</div>

            <div><strong>Impact:</strong> {{ j.impact }}</div>
            <div><strong>Impact on Customer:</strong> {{ j.impact_customer }}</div>
            
            {% if j.impact_desc %}
                <div><strong>Impact Details:</strong> {{ j.impact_desc }}</div>
            {% endif %}

            <div><strong>Start Time:</strong> {{ j.time_start }}</div>
            <div><strong>End Time:</strong> {{ j.time_end }}</div>
        </li>
    {% endfor %}

    </ul>
{% else %}
    <p>No jobs yet.</p>
{% endif %}

</body>
<script>
        document.getElementById("openJobModal").onclick = function() {
            document.getElementById("jobModal").style.display = "block";
        }

        document.getElementById("closeJobModal").onclick = function() {
            document.getElementById("jobModal").style.display = "none";
        }
</script>

</html>